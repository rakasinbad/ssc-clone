<div id="associations-form" class="page-layout carded fullwidth" fusePerfectScrollbar>
    <!-- TOP BACKGROUND -->
    <!-- <div class="accent"></div> -->
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center p-8" fxLayout="column" fxLayoutAlign="space-between none" fxLayoutGap="10px">
        <!-- CONTENT CARD (INFORMASI ASSOCIATION) -->
        <div class="content-card p-16" fxLayout="column" fxLayoutAlign="start none" fxLayoutGap="25px">
            <div>
                <div class="font-weight-600 font-size-24 line-height-20">SR Assignment Information</div>
            </div>
        
            <div class="pt-0 line-height-1.75" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="100px">
                <form class="w-100-p" [formGroup]="form" fxLayout="column" fxFlex="50" fxLayoutGap="5px" novalidate>
                    <!-- SALES REP -->
                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('salesRep'))"
                        >
                            <span
                                class="red-500-fg"
                            >* </span>Sales Rep
                        </label>

                        <select-single-sales-rep
                            #selectSalesRep
                            [placeholder]="'Search Sales Rep.'"
                            [required]="true"
                            (selected)="onSelectedSalesRep($event)"
                            fxFlexAlign="center"
                            fxFlex="80"
                        ></select-single-sales-rep>
                    </div>
                    <!-- / SALES REP -->
                    <!-- WAREHOUSE -->
                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('warehouse'))"
                        >
                            <span
                                class="red-500-fg"
                            >* </span>Warehouse
                        </label>
                
                        <select-single-warehouse
                            #selectWarehouse
                            [required]="true"
                            (selected)="onSelectedWarehouse($event)"
                            fxFlexAlign="center"
                            fxFlex="80"
                        ></select-single-warehouse>

                    </div>
                    <!-- / WAREHOUSE -->
                </form>
                <div class="img-container mb-32" *ngIf="selectedSalesRep">
                    <img
                        class="fit-image"
                        [style.border-radius]="'6px'"
                        [defaultImage]="'assets/images/avatars/profile.jpg'"
                        [useSrcset]="true"
                        [lazyLoad]="selectedSalesRep?.user?.imageUrl"
                        [errorImage]="'assets/images/avatars/profile.jpg'"
                    />
                </div>
            </div>

            <div class="content-card">
                <!-- TABS -->
                <mat-tab-group
                    class="mb-0 sinbad-white sinbad-mat-tab-group"
                    color="accent"
                    animationDuration="0ms"
                    (selectedIndexChange)="updateSelectedTab($event)"
                >
                    <!-- IN PORTFOLIO -->
                    <mat-tab label="Portfolio"></mat-tab>
                    <!-- / IN PORTFOLIO -->
                    <!-- OUT OF PORTFOLIO -->
                    <mat-tab label="Out of Portfolio"></mat-tab>
                    <!-- / OUT OF PORTFOLIO -->
                </mat-tab-group>
                <!-- / TABS -->

                <sinbad-multiple-selection
                    [disableClearAll]="false"
                    [enableSelectAll]="false"
                    [initialSelectedOptions]="(initialPortfolios$ | async)"
                    [totalInitialSelectedOptions]="(totalInitialPortfolios$ | async)"
                    [availableOptions]="(availableAssociations$ | async)"
                    [totalAvailableOptions]="(totalAvailableAssociations$ | async)"
                    [isAvailableOptionsLoading]="(isAvailableAssociationsLoading$ | async)"
                    [isSelectedOptionsLoading]="(isSelectedAssociationsLoading$ | async)"
                    (availableReachedBottom)="requestAssociation('', true)"
                    (selectionListChanged)="onSelectedStoresChanged($event)"
                    (clearAll)="clearAll()"
                    (search)="requestAssociation($event, false)"
                    (clickInfo)="onClickedSeeDetails($event)"
                ></sinbad-multiple-selection>
            </div>
        </div>
        <!-- / CONTENT CARD (INFORMASI PRODUK) -->
    </div>
    <!-- / CENTER -->
    <!-- Spinner Loader -->
    <div class="loader" *ngIf="isLoading$ | async">
        <mat-spinner color="accent"></mat-spinner>
    </div>
    <!-- Spinner Loader -->
</div>
