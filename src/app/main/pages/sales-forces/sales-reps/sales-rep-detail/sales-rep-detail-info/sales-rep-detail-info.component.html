<div class="section pb-48">
    <div class="pb-16 mb-16 section__top--contents" fxLayout="row" fxLayoutAlign="start center">
        <div class="h2 section__title">Sales Rep Detail</div>
    </div>

    <div class="box-info horizontal" fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="10px">
        <div
            *ngIf="salesRep"
            class="sales-image"
            fxFlexAlign="start"
            [@animate]="{ value: '*', params: { delay: '50ms', scale: '0.2' } }"
        >
            <img
                [defaultImage]="'assets/images/avatars/profile.jpg'"
                [useSrcset]="true"
                [lazyLoad]="salesRep?.user?.imageUrl"
                [errorImage]="'assets/images/avatars/profile.jpg'"
            />
        </div>

        <div
            *ngIf="!salesRep"
            class="sales-image"
            fxFlexAlign="start"
            [@animate]="{ value: '*', params: { delay: '50ms', scale: '0.2' } }"
        >
            <img [src]="'assets/images/avatars/profile.jpg'" />
        </div>

        <div fxLayout="column" fxFlex fxLayoutGap="30px">
            <div
                class="custom-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <label class="custom-field__label" fxFlexAlign="center" fxFlex="13">
                    Sales Rep Name
                </label>

                <label class="custom-field__label" fxFlexAlign="center" fxFlex="100">
                    <span>{{ salesRep?.user?.fullName || '-' }}</span>
                </label>
            </div>

            <div
                class="custom-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <label class="custom-field__label" fxFlexAlign="center" fxFlex="13">
                    Phone Number
                </label>

                <label class="custom-field__label" fxFlexAlign="center" fxFlex="100">
                    <span>{{ salesRep?.user?.mobilePhoneNo || '-' }}</span>
                </label>
            </div>

            <div
                class="custom-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <label class="custom-field__label" fxFlexAlign="center" fxFlex="13">
                    KTP ID
                </label>

                <label class="custom-field__label" fxFlexAlign="center" fxFlex="100">
                    <span>{{ salesRep?.user?.idNo || '-' }}</span>
                </label>
            </div>

            <div
                class="custom-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <label class="custom-field__label" fxFlexAlign="center" fxFlex="13">
                    Sales Team
                </label>

                <label class="custom-field__label" fxFlexAlign="center" fxFlex="100">
                    <span>{{ salesRep?.user?.saleTeam?.name || '-' }}</span>
                </label>
            </div>

            <div
                class="custom-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <label class="custom-field__label" fxFlexAlign="center" fxFlex="13">
                    Join Date
                </label>

                <label class="custom-field__label" fxFlexAlign="center" fxFlex="100">
                    <span>{{ (salesRep?.user?.joinDate | date: 'dd/MM/yyyy') || '-' }}</span>
                </label>
            </div>

            <div
                class="custom-field mt-16"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <label fxFlex="13"></label>

                <div class="custom-field__field" fxFlex="100">
                    <mat-slide-toggle [checked]="isChecked(salesRep?.status)" disabled>
                        Active
                    </mat-slide-toggle>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="section mb-48">
    <mat-divider></mat-divider>
</div>

<div class="section pb-48">
    <div class="pb-16 section__top--contents" fxLayout="row" fxLayoutAlign="start center">
        <div class="h2 section__title">
            List of Portfolio ({{ totalPortfolio(salesRep?.user?.portfolios) }})
        </div>
    </div>

    <div class="p-4" fusePerfectScrollbar>
        <div fxLayout="row" fxLayoutGap="15px">
            <ng-container
                *ngIf="totalPortfolio(salesRep?.user?.portfolios) > 0; else portfoliosNotFound"
            >
                <mat-card
                    class="sinbad__card"
                    fxFlex="2 2 calc(30em + 10px)"
                    *ngFor="let portfolio of salesRep?.user?.portfolios"
                >
                    <mat-card-header class="sinbad__card--header">
                        <mat-card-title>Portfolio Card</mat-card-title>
                    </mat-card-header>

                    <mat-card-content>
                        <div fxLayout="row" fxLayoutGap="10px">
                            <div fxLayout="row" fxFlex fxLayoutGap="5px">
                                <div fxLayout="column" fxFlex fxLayoutGap="15px">
                                    <div fxFlex>Portfolio Name</div>
                                    <div fxFlex>Total Store in Portfolio</div>
                                    <div fxFlex>Total Store in Journey Plan</div>
                                </div>

                                <div fxLayout="column" fxFlex fxLayoutGap="15px">
                                    <div fxFlex>{{ portfolio?.name || '-' }}</div>
                                    <div fxFlex>{{ portfolio?.totalStore || '-' }}</div>
                                    <div fxFlex>-</div>
                                </div>
                            </div>

                            <div fxLayout="row" fxFlex fxLayoutGap="5px">
                                <div fxLayout="column" fxFlex fxLayoutGap="15px">
                                    <div fxFlex>Faktur</div>
                                    <div fxFlex>Sales Target</div>
                                    <div fxFlex>Actual Sales</div>
                                </div>

                                <div fxLayout="column" fxFlex fxLayoutGap="15px">
                                    <div fxFlex>{{ portfolio?.invoiceGroup?.name || '-' }}</div>
                                    <div fxFlex>
                                        {{
                                            portfolio?.totalTargetSales !== 0
                                                ? (portfolio?.totalTargetSales
                                                      | price: 'full':'IDR':'narrow':'1.2-2') || '-'
                                                : portfolio?.totalTargetSales
                                        }}
                                    </div>
                                    <div fxFlex>
                                        {{
                                            portfolio?.actualTargetSales !== 0
                                                ? (portfolio?.actualTargetSales
                                                      | price: 'full':'IDR':'narrow':'1.2-2') || '-'
                                                : portfolio?.actualTargetSales
                                        }}
                                    </div>
                                </div>
                            </div>

                            <!-- <div fxLayout="column" fxFlex="50" fxLayoutGap="15px">
                                <div fxLayout="row" fxFlex fxLayoutGap="20px">
                                    <div fxFlex="55">Portfolio Name</div>
                                    <div>{{ portfolio?.name || '-' }}</div>
                                </div>

                                <div fxLayout="row" fxFlex fxLayoutGap="20px">
                                    <div fxFlex="55">Total Store in Portfolio</div>
                                    <div>{{ portfolio?.totalStore || '-' }}</div>
                                </div>

                                <div fxLayout="row" fxFlex fxLayoutGap="20px">
                                    <div fxFlex="55">Total Store in Journey Plan</div>
                                    <div>-</div>
                                </div>
                            </div>

                            <div fxLayout="column" fxFlex="50" fxLayoutGap="15px">
                                <div fxLayout="row" fxFlex fxLayoutGap="20px">
                                    <div fxFlex="55">Faktur</div>
                                    <div>{{ portfolio?.invoiceGroup?.name || '-' }}</div>
                                </div>

                                <div fxLayout="row" fxFlex fxLayoutGap="20px">
                                    <div fxFlex="55">Sales Target</div>
                                    <div>
                                        {{
                                            portfolio?.totalTargetSales
                                                ? (portfolio?.totalTargetSales
                                                      | price: 'full':'IDR':'narrow':'1.2-2') || '-'
                                                : safeValue(portfolio?.totalTargetSales)
                                        }}
                                    </div>
                                </div>

                                <div fxLayout="row" fxFlex fxLayoutGap="20px">
                                    <div fxFlex="55">Actual Sales</div>
                                    <div>
                                        {{
                                            portfolio?.totalActualSales
                                                ? (portfolio?.totalActualSales
                                                      | price: 'full':'IDR':'narrow':'1.2-2') || '-'
                                                : safeValue(portfolio?.totalActualSales)
                                        }}
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </mat-card-content>
                </mat-card>
            </ng-container>

            <ng-template #portfoliosNotFound>
                <mat-card class="sinbad__card" fxFlex="1 1 calc(30em + 10px)">
                    <mat-card-content
                        class="sinbad__card--content--not-found"
                        fxLayout="row"
                        fxLayoutAlign="center center"
                    >
                        <div class="loader" *ngIf="isLoading">
                            <mat-spinner color="accent" [diameter]="25"></mat-spinner>
                        </div>

                        <p *ngIf="!isLoading">No portfolios found</p>
                    </mat-card-content>
                </mat-card>
            </ng-template>
        </div>
    </div>
</div>
