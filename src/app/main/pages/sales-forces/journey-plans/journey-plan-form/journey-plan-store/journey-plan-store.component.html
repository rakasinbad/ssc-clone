<form id="journey-plan-store-form" [formGroup]="form" cdkScrollable novalidate>
    <div class="section pb-48">
        <div class="pb-16 section__top--contents" fxLayout="row" fxLayoutAlign="start center">
            <div class="h2 section__title">Add Journey Plan</div>
        </div>

        <div class="box-info horizontal" fxLayout="column">
            <div fxLayout="row">
                <div fxLayout="column" fxLayoutGap="15px" fxFlex>
                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="start center"
                        fxLayoutGap="15px"
                    >
                        <label
                            class="custom-field__label"
                            fxFlexAlign="center"
                            fxFlex="18"
                            [class.mat-error]="hasError('startDate')"
                        >
                            *Start Date
                        </label>

                        <div class="custom-field__field" fxFlex="100">
                            <mat-form-field appearance="outline" fxFlex="80">
                                <input
                                    matInput
                                    [matDatepicker]="startDatePicker"
                                    name="startDate"
                                    formControlName="startDate"
                                />

                                <mat-datepicker-toggle
                                    matSuffix
                                    [for]="startDatePicker"
                                ></mat-datepicker-toggle>

                                <mat-datepicker #startDatePicker touchUi></mat-datepicker>

                                <mat-error *ngIf="hasError('startDate', true)">
                                    {{ getErrorMessage('startDate') }}
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="start center"
                        fxLayoutGap="15px"
                    >
                        <label
                            class="custom-field__label"
                            fxFlexAlign="center"
                            fxFlex="18"
                            [class.mat-error]="hasError('portfolio')"
                        >
                            *Portfolio
                        </label>

                        <div class="custom-field__field" fxFlex="100">
                            <!-- <mat-form-field appearance="outline" fxFlex="50">
                            <input
                                #triggerSalesTeam
                                matInput
                                formControlName="team"
                                placeholder="Search Sales Team"
                                aria-label="Sales Team"
                                [matAutocomplete]="autoSalesTeam"
                                (keyup)="onKeyup($event, 'salesTeam')"
                                (keydown)="onKeydown($event, 'salesTeam')"
                            />

                            <mat-autocomplete
                                #autoSalesTeam="matAutocomplete"
                                [displayWith]="onDisplaySalesTeam"
                                (opened)="onOpenAutocomplete('salesTeam')"
                                (optionSelected)="onSelectAutocomplete($event, 'salesTeam')"
                            >
                                <mat-option
                                    *ngIf="!(isLoadingSalesTeam$ | async) && field.salesTeam.typing"
                                >
                                    Searching...
                                </mat-option>

                                <ng-container
                                    *ngIf="
                                        !field.salesTeam.typing && (salesTeams$ | async)?.length > 0
                                    "
                                >
                                    <ng-container
                                        *ngIf="salesTeams$ | async as salesTeams; else noSalesTeams"
                                    >
                                        <mat-option
                                            *ngFor="let source of salesTeams"
                                            [value]="source"
                                            [attr.title]="displayOption(source, 'salesTeam')"
                                        >
                                            <ng-container
                                                *ngIf="source && !(isLoadingSalesTeam$ | async)"
                                            >
                                                <span
                                                    [innerHtml]="
                                                        displayOption(source, 'salesTeam', true)
                                                            | highlight: getHighlight('salesTeam')
                                                    "
                                                ></span>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="!source || (isLoadingSalesTeam$ | async)"
                                            >
                                                Loading...
                                            </ng-container>
                                        </mat-option>
                                    </ng-container>

                                    <ng-template #noSalesTeams>
                                        <mat-option>None</mat-option>
                                    </ng-template>
                                </ng-container>

                                <ng-container
                                    *ngIf="
                                        !field.salesTeam.typing && !(salesTeams$ | async)?.length
                                    "
                                >
                                    <mat-option>None</mat-option>
                                </ng-container>
                            </mat-autocomplete>

                            <mat-hint align="end" *ngIf="hasLength('team', 3)">
                                Please enter 3 or more characters.
                            </mat-hint>

                            <mat-error *ngIf="hasError('team', true)">
                                {{ getErrorMessage('team') }}
                            </mat-error>
                        </mat-form-field> -->
                        </div>
                    </div>
                </div>

                <div fxLayout="column" fxFlex>
                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="start center"
                        fxLayoutGap="15px"
                    >
                        <label
                            class="custom-field__label"
                            fxFlexAlign="center"
                            fxFlex="18"
                            [class.mat-error]="hasError('startDate')"
                        >
                            *End Date
                        </label>

                        <div class="custom-field__field" fxFlex="100">
                            <mat-form-field appearance="outline" fxFlex="80">
                                <input
                                    matInput
                                    [matDatepicker]="endDatePicker"
                                    name="endDate"
                                    formControlName="endDate"
                                />

                                <mat-datepicker-toggle
                                    matSuffix
                                    [for]="endDatePicker"
                                ></mat-datepicker-toggle>

                                <mat-datepicker #endDatePicker touchUi></mat-datepicker>

                                <mat-error *ngIf="hasError('endDate', true)">
                                    {{ getErrorMessage('endDate') }}
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>

            <!--   <div fxLayout="column" fxFlex>


                <div
                    class="custom-field"
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxLayoutGap="15px"
                >
                    <label
                        class="custom-field__label"
                        fxFlexAlign="center"
                        fxFlex="13"
                        [class.mat-error]="hasError('phone')"
                    >
                        *Phone Number
                    </label>

                    <div class="custom-field__field" fxFlex="100">
                        <mat-form-field appearance="outline" fxFlex="50">
                            <input type="tel" matInput formControlName="phone" />

                            <mat-error *ngIf="hasError('phone', true)">
                                {{ getErrorMessage('phone') }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <ng-container *ngIf="pageType === 'new'">
                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="start center"
                        fxLayoutGap="15px"
                    >
                        <label
                            class="custom-field__label"
                            fxFlexAlign="center"
                            fxFlex="13"
                            [class.mat-error]="hasError('newPassword')"
                        >
                            *New Password
                        </label>

                        <div class="custom-field__field" fxFlex="100">
                            <mat-form-field appearance="outline" fxFlex="50">
                                <input type="password" matInput formControlName="newPassword" />
                                <mat-hint align="end">Must be at least 8 characters long</mat-hint>

                                <mat-error *ngIf="hasError('newPassword', true)">
                                    {{ getErrorMessage('newPassword') }}
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>

                    <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="start center"
                        fxLayoutGap="15px"
                    >
                        <label
                            class="custom-field__label"
                            fxFlexAlign="center"
                            fxFlex="13"
                            [class.mat-error]="hasError('confirmPassword')"
                        >
                            *re-Type Pass..
                        </label>

                        <div class="custom-field__field" fxFlex="100">
                            <mat-form-field appearance="outline" fxFlex="50">
                                <input type="password" matInput formControlName="confirmPassword" />

                                <mat-error *ngIf="hasError('confirmPassword', true)">
                                    {{ getErrorMessage('confirmPassword') }}
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </ng-container>

                <div
                    class="custom-field"
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxLayoutGap="15px"
                >
                    <label
                        class="custom-field__label"
                        fxFlexAlign="center"
                        fxFlex="13"
                        [class.mat-error]="hasError('photo')"
                    >
                        Sales Photo
                    </label>

                    <div class="custom-field__field" fxFlex="50">
                        <mat-form-field
                            class="sinbad-file-field"
                            appearance="outline"
                            fxFlex="57"
                            [class.mat-form-field-invalid]="hasError('photo')"
                        >
                            <input
                                #photoPicker
                                type="file"
                                class="custom-file"
                                accept=".jpg, .jpeg, .png"
                                formControlName="photo"
                                (change)="onFileBrowse($event, 'photo')"
                            />
                            <input
                                matInput
                                [formControl]="tmp.photo"
                                [value]="
                                    tmp.photo.value && tmp.photo.value.name
                                        ? tmp.photo.value.name
                                        : null
                                "
                                placeholder="No file choose"
                            />

                            <mat-hint class="mat-error" *ngIf="hasError('photo', true)">
                                {{ getErrorMessage('photo') }}
                            </mat-hint>
                        </mat-form-field>

                        <button
                            mat-flat-button
                            color="accent"
                            type="button"
                            (click)="photoPicker.click()"
                            fxFlexAlign="center"
                        >
                            Upload your file
                        </button>

                        <ng-container
                            *ngIf="pageType === 'edit' && (salesRep$ | async) as salesRep"
                        >
                            <a
                                [href]="sanitize(salesRep?.user?.imageUrl)"
                                target="_blank"
                                *ngIf="salesRep?.user?.imageUrl"
                                style="position: relative;top: 0.8em"
                            >
                                <mat-icon>remove_red_eye</mat-icon>
                            </a>
                        </ng-container>
                    </div>
                </div>

                <div
                    class="custom-field"
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxLayoutGap="15px"
                >
                    <label
                        class="custom-field__label"
                        fxFlexAlign="center"
                        fxFlex="13"
                        [class.mat-error]="hasError('identityId')"
                    >
                        *KTP ID
                    </label>

                    <div class="custom-field__field" fxFlex="100">
                        <mat-form-field appearance="outline" fxFlex="50">
                            <input
                                type="text"
                                matInput
                                formControlName="identityId"
                                mask="0000000000000000"
                            />

                            <mat-error *ngIf="hasError('identityId', true)">
                                {{ getErrorMessage('identityId') }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div
                    class="custom-field"
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxLayoutGap="15px"
                >
                    <label
                        class="custom-field__label"
                        fxFlexAlign="center"
                        fxFlex="13"
                        [class.mat-error]="hasError('team')"
                    >
                        *Sales Team
                    </label>

                    <div class="custom-field__field" fxFlex="100">
                        <mat-form-field appearance="outline" fxFlex="50">
                            <input
                                #triggerSalesTeam
                                matInput
                                formControlName="team"
                                placeholder="Search Sales Team"
                                aria-label="Sales Team"
                                [matAutocomplete]="autoSalesTeam"
                                (keyup)="onKeyup($event, 'salesTeam')"
                                (keydown)="onKeydown($event, 'salesTeam')"
                            />

                            <mat-autocomplete
                                #autoSalesTeam="matAutocomplete"
                                [displayWith]="onDisplaySalesTeam"
                                (opened)="onOpenAutocomplete('salesTeam')"
                                (optionSelected)="onSelectAutocomplete($event, 'salesTeam')"
                            >
                                <mat-option
                                    *ngIf="!(isLoadingSalesTeam$ | async) && field.salesTeam.typing"
                                >
                                    Searching...
                                </mat-option>

                                <ng-container
                                    *ngIf="
                                        !field.salesTeam.typing && (salesTeams$ | async)?.length > 0
                                    "
                                >
                                    <ng-container
                                        *ngIf="salesTeams$ | async as salesTeams; else noSalesTeams"
                                    >
                                        <mat-option
                                            *ngFor="let source of salesTeams"
                                            [value]="source"
                                            [attr.title]="displayOption(source, 'salesTeam')"
                                        >
                                            <ng-container
                                                *ngIf="source && !(isLoadingSalesTeam$ | async)"
                                            >
                                                <span
                                                    [innerHtml]="
                                                        displayOption(source, 'salesTeam', true)
                                                            | highlight: getHighlight('salesTeam')
                                                    "
                                                ></span>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="!source || (isLoadingSalesTeam$ | async)"
                                            >
                                                Loading...
                                            </ng-container>
                                        </mat-option>
                                    </ng-container>

                                    <ng-template #noSalesTeams>
                                        <mat-option>None</mat-option>
                                    </ng-template>
                                </ng-container>

                                <ng-container
                                    *ngIf="
                                        !field.salesTeam.typing && !(salesTeams$ | async)?.length
                                    "
                                >
                                    <mat-option>None</mat-option>
                                </ng-container>
                            </mat-autocomplete>

                            <mat-hint align="end" *ngIf="hasLength('team', 3)">
                                Please enter 3 or more characters.
                            </mat-hint>

                            <mat-error *ngIf="hasError('team', true)">
                                {{ getErrorMessage('team') }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div
                    class="custom-field mt-16"
                    fxLayout="row"
                    fxLayoutAlign="start center"
                    fxLayoutGap="15px"
                >
                    <label fxFlex="13"></label>

                    <div class="custom-field__field" fxFlex="100">
                        <mat-slide-toggle formControlName="status">
                            Active
                        </mat-slide-toggle>
                    </div>
                </div>
            </div> -->
        </div>
    </div>

    <div class="section mb-48">
        <mat-divider></mat-divider>
    </div>

    <div class="section pb-48">
        <div class="pb-16 section__top--contents" fxLayout="row" fxLayoutAlign="start center">
            <div class="h2 section__title">Find Store</div>
        </div>
    </div>
</form>
