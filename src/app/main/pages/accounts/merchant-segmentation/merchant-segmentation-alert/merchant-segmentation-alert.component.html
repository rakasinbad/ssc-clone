<mat-toolbar class="m-0 px-16 pt-8 pb-16">
    <mat-toolbar-row class="p-0">
        <span mat-dialog-title class="m-0">{{ dialogTitle }}</span>
        <!-- <span class="spacer"></span>
        <button type="button" mat-icon-button aria-label="Close Dialog" mat-dialog-close>
            <mat-icon>close</mat-icon>
        </button> -->
    </mat-toolbar-row>

    <mat-toolbar-row class="p-0 text-truncate">
        <span class="mat-body-2">
            {{ initForm?.change | titlecase }} this branch will also {{ initForm?.change }} other
            segment branch in lower level, and release its store<br />relation. Do you want to
            proceed this?
        </span>
    </mat-toolbar-row>
</mat-toolbar>

<mat-dialog-content class="mat-typography m-0 p-0 px-16">
    <mat-table
        class="merchant-alert-table sinbad-table"
        [class.sinbad-table-no-record]="!(isLoading$ | async) && (totalDataSource$ | async) === 0"
        #table
        [dataSource]="dataSource$ | async"
        matSort
        [@animateStagger]="{ value: '50' }"
        fusePerfectScrollbar
    >
        <!-- Store ID Column -->
        <ng-container matColumnDef="store-id">
            <mat-header-cell *matHeaderCellDef>
                Store ID
            </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <p class="text-word-break-break-word">
                    {{ row?.storeCode || '-' }}
                </p>
            </mat-cell>
        </ng-container>

        <!-- Store Name Column -->
        <ng-container matColumnDef="store-name">
            <mat-header-cell *matHeaderCellDef>
                Store Name
            </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <p class="text-word-break-break-word">
                    {{ row?.name || '-' }}
                </p>
            </mat-cell>
        </ng-container>

        <!-- Store Type Column -->
        <ng-container matColumnDef="store-type">
            <mat-header-cell [class.active]="segmentType === 'type'" *matHeaderCellDef>
                Store Type
            </mat-header-cell>
            <mat-cell [class.active]="segmentType === 'type'" *matCellDef="let row">
                <p class="text-word-break-break-word">
                    {{ (row?.storeTypes)[0]?.type?.name || '-' }}
                </p>
            </mat-cell>
        </ng-container>

        <!-- Store Group Column -->
        <ng-container matColumnDef="store-group">
            <mat-header-cell [class.active]="segmentType === 'group'" *matHeaderCellDef>
                Store Group
            </mat-header-cell>
            <mat-cell [class.active]="segmentType === 'group'" *matCellDef="let row">
                <p class="text-word-break-break-word">
                    {{ (row?.storeGroups)[0]?.group?.name || '-' }}
                </p>
            </mat-cell>
        </ng-container>

        <!-- Store Channel Column -->
        <ng-container matColumnDef="store-channel">
            <mat-header-cell [class.active]="segmentType === 'channel'" *matHeaderCellDef>
                Store Channel
            </mat-header-cell>
            <mat-cell [class.active]="segmentType === 'channel'" *matCellDef="let row">
                <p class="text-word-break-break-word">
                    {{ (row?.storeChannels)[0]?.channel?.name || '-' }}
                </p>
            </mat-cell>
        </ng-container>

        <!-- Store Cluster Column -->
        <ng-container matColumnDef="store-cluster">
            <mat-header-cell [class.active]="segmentType === 'cluster'" *matHeaderCellDef>
                Store Cluster
            </mat-header-cell>
            <mat-cell [class.active]="segmentType === 'cluster'" *matCellDef="let row">
                <p class="text-word-break-break-word">
                    {{ (row?.storeClusters)[0]?.cluster?.name || '-' }}
                </p>
            </mat-cell>
        </ng-container>

        <!-- No Record Column -->
        <ng-container matColumnDef="no-record">
            <mat-footer-cell *matFooterCellDef colspan="6">
                No records found
            </mat-footer-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns" class="merchant-alert"></mat-row>
        <mat-footer-row
            *matFooterRowDef="['no-record']"
            [fxShow]="!(isLoading$ | async) && (totalDataSource$ | async) === 0"
        ></mat-footer-row>
    </mat-table>

    <div
        class="loader-content"
        *ngIf="(isLoading$ | async) && (!(totalDataSource$ | async) || (totalDataSource$ | async))"
    >
        <mat-spinner color="accent"></mat-spinner>
    </div>

    <mat-paginator
        [disabled]="
            ((isLoading$ | async) && !(totalDataSource$ | async)) ||
            (!(isLoading$ | async) && (totalDataSource$ | async) === 0)
        "
        [length]="totalDataSource$ | async"
        [pageSize]="defaultPageSize"
        [pageSizeOptions]="defaultPageOpts"
        showFirstLastButtons
    ></mat-paginator>
</mat-dialog-content>

<mat-dialog-actions class="m-0 p-0 px-16" align="end">
    <button
        type="button"
        mat-stroked-button
        class="w-128"
        aria-label="Close Dialog"
        mat-dialog-close
    >
        No
    </button>
    <button
        mat-flat-button
        color="accent"
        class="w-128"
        [mat-dialog-close]="{ id: initForm?.id, change: initForm?.change }"
    >
        Yes
    </button>
</mat-dialog-actions>
