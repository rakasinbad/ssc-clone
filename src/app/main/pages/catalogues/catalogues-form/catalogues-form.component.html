<div id="catalogues-form" class="page-layout carded fullwidth" fusePerfectScrollbar>
    <!-- TOP BACKGROUND -->
    <div class="accent"></div>
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center" fxLayout="column" fxLayoutAlign="space-between none" fxLayoutGap="25px">
        <!-- CONTENT HEADER -->
        <!-- <div class="header sinbad" fxLayout="row" fxLayoutAlign="space-between center"></div> -->
        <!-- / CONTENT HEADER -->

        <!-- CONTENT CARD (INFORMASI PRODUK) -->
        <div class="content-card mt-16">
            <div class="p-16">
                <div class="h1">Informasi Produk</div>
            </div>
        
            <div class="p-16 pt-0 line-height-1.75">
                <form class="w-100-p" [formGroup]="form" fxLayout="column" fxFlex novalidate>
                    <!-- PRODUCT ID -->
                    <div
                        [ngClass]="formClass"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.externalId'))"
                        >
                            *Produk ID
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80" *ngIf="formMode !== 'view'">
                            <input
                                hidden
                                name="id"
                                formControlName="id"
                            />
                            <input
                                matInput
                                name="externalId"
                                formControlName="externalId"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.externalId'))"
                            >
                                {{ getFormError(form.get('productInfo.externalId')) }}
                            </mat-error>
                            <mat-error
                                *ngIf="$any(form.get('productInfo.externalId').errors)?.skuSupplierExist"
                            >
                                SKU already exist.
                            </mat-error>
                        </mat-form-field>
                        <span fxFlex="80" *ngIf="formMode === 'view'">
                            {{ form.get('productInfo.externalId').value }}
                        </span>
                    </div>
                    <!-- / PRODUCT ID -->
                    <!-- NAMA PRODUK -->
                    <div
                        [ngClass]="formClass"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.name'))"
                        >
                            *Nama Produk
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80" *ngIf="formMode !== 'view'">
                            <input
                                matInput
                                name="name"
                                formControlName="name"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.name'))"
                            >
                                {{ getFormError(form.get('productInfo.name')) }}
                            </mat-error>
                        </mat-form-field>
                        <span fxFlex="80" *ngIf="formMode === 'view'">
                            {{ form.get('productInfo.name').value }}
                        </span>
                    </div>
                    <!-- / NAMA PRODUK -->
                    <!-- DETAIL PRODUK -->
                    <div
                        [ngClass]="formClass"
                        [class.h-80]="!isViewMode()"
                        fxLayout="row"
                        fxLayoutAlign="space-between strectch"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlex="18"
                            fxFlexAlign="center"
                            class="pr-0"
                            [class.pt-20]="formMode !== 'view'"
                            [class.mat-error]="hasError(form.get('productInfo.information'))"
                        >
                            Detail Produk
                        </label>
                
                        <div fxFlex="80" fxLayout="column" fxLayoutAlign="start start" fxLayoutGap="20px" *ngIf="formMode !== 'view'">
                            <quill-editor
                                [class.ql-error]="hasError(form.get('productInfo.information'))"
                                format='html'
                                formControlName="information"
                            ></quill-editor>
                            <!-- <code>
                                {{ form.get('productInfo.description').value }}
                            </code> -->
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.information'))"
                            >
                                {{ getFormError(form.get('productInfo.information')) }}
                            </mat-error>
                        </div>
                        <span fxFlex="80" *ngIf="formMode === 'view' && form.get('productInfo.information').value">
                            {{ form.get('productInfo.information').value }}
                        </span>
                        <span fxFlex="80" *ngIf="formMode === 'view' && !form.get('productInfo.information').value">
                            &nbsp;
                        </span>
                        <!-- <mat-form-field appearance="outline" fxFlex="80">
                            <textarea
                                matInput
                                name="description"
                                formControlName="description"
                            ></textarea>
                        </mat-form-field> -->
                    </div>
                    <!-- / DETAIL PRODUK -->
                    <!-- DESKRIPSI PRODUK -->
                    <div
                        [ngClass]="formClass"
                        [class.h-80]="!isViewMode()"
                        fxLayout="row"
                        fxLayoutAlign="space-between strectch"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlex="18"
                            fxFlexAlign="center"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.description'))"
                        >
                            Deskripsi Produk
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80" *ngIf="formMode !== 'view'">
                            <textarea
                                matInput
                                rows="5"
                                formControlName="description"
                            ></textarea>
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.description'))"
                            >
                                {{ getFormError(form.get('productInfo.description')) }}
                            </mat-error>
                        </mat-form-field>
                        <span fxFlex="80" *ngIf="formMode === 'view' && form.get('productInfo.description').value">
                            {{ form.get('productInfo.description').value }}
                        </span>
                        <span fxFlex="80" *ngIf="formMode === 'view' && !form.get('productInfo.description').value">
                            &nbsp;
                        </span>
                        <!-- <mat-form-field appearance="outline" fxFlex="80">
                            <textarea
                                matInput
                                name="description"
                                formControlName="description"
                            ></textarea>
                        </mat-form-field> -->
                    </div>
                    <!-- / DESKRIPSI PRODUK -->
                    <!-- VARIAN PRODUK -->
                    <!-- <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="12"
                            [class.mat-error]="
                                form.get('productInfo.variant').errors &&
                                !form.get('productInfo.variant').untouched &&
                                (form.get('productInfo.variant').dirty || form.get('productInfo.variant').touched)
                            "
                        >
                            *Variant
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80">
                            <input
                                matInput
                                name="variant"
                                formControlName="variant"
                            />
                        </mat-form-field>
                    </div> -->
                    <!-- / VARIAN PRODUK -->
                    <!-- BRAND PRODUK -->
                    <div
                        [ngClass]="formClass"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.brandId'))"
                        >
                            *Brand
                        </label>

                        <mat-form-field appearance="outline" fxFlex="80" *ngIf="formMode !== 'view'">
                            <mat-select
                                name="brandId"
                                formControlName="brandId"
                            >
                                <mat-option
                                    *ngFor="let brand of brands$ | async"
                                    [value]="brand.id"
                                >
                                    {{ brand.name }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.brandId'))"
                            >
                                {{ getFormError(form.get('productInfo.brandId')) }}
                            </mat-error>
                        </mat-form-field>
                        <span fxFlexAlign="center" fxFlex="80" *ngIf="formMode === 'view' && form.get('productInfo.brandName').value">
                            {{ form.get('productInfo.brandName').value }}
                        </span>
                        <span fxFlexAlign="center" fxFlex="80" *ngIf="formMode === 'view' && !form.get('productInfo.brandName').value">
                            &nbsp;
                        </span>
                    </div>
                    <!-- / BRAND PRODUK -->
                    <!-- KATEGORI PRODUK -->
                    <div
                        [ngClass]="formClass"
                        [class.pb-16]="!isViewMode()"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.category'), { ignoreTouched: true, ignoreDirty: true })"
                        >
                            *Kategori
                        </label>

                        <span class="ml-20 grey-600-fg" fxFlexAlign="center" fxFlex="80" fxLayout="column" fxLayoutAlign="start start">
                            <div
                                fxFlex
                                fxLayout="row"
                            >
                                <strong [innerHTML]="productCategory$" fxFlexAlign="center"></strong>
                                <button
                                    fxFlexAlign="center"
                                    class="red-fg"
                                    mat-icon-button
                                    [disableRipple]="true"
                                    style="margin-left: 10px;"
                                    matTooltip="Change the category"
                                    matTooltipPosition="right"
                                    (click)="onEditCategory(form.get('productInfo.id').value)"
                                    *ngIf="formMode !== 'view'"
                                >
                                    <mat-icon>edit</mat-icon>
                                </button>
                            </div>
                            <p
                                class="mat-error my-0"
                                *ngIf="hasError(form.get('productInfo.category'), { ignoreTouched: true, ignoreDirty: true })"
                            >
                                {{ getFormError(form.get('productInfo.category')) }}
                            </p>
                        </span>
                    </div>
                    <!-- / KATEGORI PRODUK -->
                    <!-- PRODUK STOK -->
                    <div
                        [ngClass]="formClass"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.stock'))"
                        >
                            Product Stock
                        </label>
                
                        <mat-form-field appearance="outline" fxFlexAlign="center" fxFlex="80">
                            <input
                                matInput
                                name="stock"
                                formControlName="stock"
                                mask="separator"
                                thousandSeparator="."
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.stock'))"
                            >
                                {{ getFormError(form.get('productInfo.stock')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / PRODUK STOK -->
                    <!-- UOM -->
                    <div
                        [ngClass]="formClass"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productInfo"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productInfo.uom'))"
                        >
                            UOM 
                        </label>
                
                        <mat-form-field fxFlexAlign="center" appearance="outline" fxFlex="80">
                            <mat-select
                                name="uom"
                                formControlName="uom"
                            >
                                <mat-option
                                    *ngFor="let unit of catalogueUnits$ | async"
                                    [value]="unit.id"
                                >
                                    {{ unit.unit }}
                                </mat-option>
                            </mat-select>
                            <mat-error
                                *ngIf="hasError(form.get('productInfo.uom'))"
                            >
                                {{ getFormError(form.get('productInfo.uom')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / UOM -->
                </form>
            </div>
        </div>
        <!-- / CONTENT CARD (INFORMASI PRODUK) -->

        <!-- CONTENT CARD (INFORMASI PENJUALAN) -->
        <div class="content-card">
            <div class="p-16">
                <div class="h1">Informasi Penjualan</div>
            </div>
        
            <div class="p-16 pt-0 line-height-1.75">
                <form class="w-100-p" [formGroup]="form" fxLayout="column" fxFlex novalidate>
                    <!-- HARGA PRODUK -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productSale"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productSale.productPrice'))"
                        >
                            *Retailer <br/>Buying Price
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80">
                            <input
                                matInput
                                name="price"
                                formControlName="productPrice"
                                mask="separator.2"
                                thousandSeparator="."
                                prefix="Rp"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productSale.productPrice'))"
                            >
                                {{ getFormError(form.get('productSale.productPrice')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / HARGA PRODUK -->
                    <!-- HARGA RETAIL -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productSale"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productSale.retailPrice'))"
                        >
                            Discounted Retailer <br/>Buying Price
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80">
                            <input
                                matInput
                                name="price"
                                formControlName="retailPrice"
                                mask="separator.2"
                                thousandSeparator="."
                                prefix="Rp"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productSale.retailPrice'))"
                            >
                                {{ getFormError(form.get('productSale.retailPrice')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / HARGA RETAIL -->
                    <!-- TAG PRODUK -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutGap="20px"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productSale"
                    >
                        <label
                            fxFlexAlign="start"
                            fxFlex="18"
                            class="pr-0 mt-24"
                            [class.mat-error]="hasError(form.get('productSale.tags'), { ignoreTouched: true, ignoreDirty: true })"
                        >
                            *Product Tag
                        </label>
                
                        <div fxFlex fxLayout="column" fxLayoutAlign="start stretch">
                            <div fxLayout="row">
                                <mat-form-field
                                    fxFlex
                                    appearance="outline"
                                    [class.mat-form-field-invalid]="hasError(form.get('productSale.tags'), { ignoreTouched: true, ignoreDirty: true })"
                                    class="no-padding"
                                >
                                    <mat-chip-list #chipList aria-label="Tags">
                                        <mat-chip *ngFor="let tag of (productTagsControls?.controls); index as $index;"
                                                    selectable="true"
                                                    removable="true"
                                                    (removed)="onRemoveTag($index)">
                                            {{ tag.value }}
                                            <mat-icon matChipRemove>cancel</mat-icon>
                                        </mat-chip>
                                        <input
                                            [matChipInputFor]="chipList"
                                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                            [matChipInputAddOnBlur]="true"
                                            (matChipInputTokenEnd)="onAddTag($event)"
                                            >
                                    </mat-chip-list>
                                </mat-form-field>
                            </div>
                            <mat-error
                                *ngIf="hasError(form.get('productSale.tags'), { ignoreTouched: true, ignoreDirty: true })"
                            >
                                {{ getFormError(form.get('productSale.tags')) }}
                            </mat-error>
                        </div>
                    </div>
                    <!-- / TAG PRODUK -->
                    <!-- VARIASI PRODUK (NO VARIANT) -->
                    <!-- <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productSale"
                        *ngIf="productVariantControls.length === 0; else hasVariants;"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="12"
                            [class.mat-error]="
                                form.get('productSale.variants').errors &&
                                !form.get('productSale.variants').untouched &&
                                (form.get('productSale.variants').dirty || form.get('productSale.variants').touched)
                            "
                        >
                            <p>Variasi</p>
                        </label>
                
                        <div
                            appearance="outline"
                            fxLayout="column"
                            fxLayoutAlign="space-between stretch"
                            fxFlex="80"
                        >
                            <button
                                mat-stroked-button
                                style="border-style: dashed; width: 100%;"
                                class="green--fg"
                                (click)="onAddVariant()"
                            >
                                <mat-icon>add_circle</mat-icon>
                                Aktifkan Variasi
                            </button>
                        </div>
                    </div> -->
                    <!-- / VARIASI PRODUK (NO VARIANT) -->
                    <!-- VARIASI PRODUK (HAS VARIANTS) -->
                    <!-- <ng-template
                        #hasVariants
                    >
                        <div
                            class="custom-field"
                            fxLayout="column"
                            fxLayoutAlign="space-between stretch"
                            formGroupName="productSale"
                        >
                            <div
                                *ngFor="let variant of productVariantControls; index as $index;"
                                fxLayout="row"
                                fxLayoutAlign="space-between start"
                            > -->
                                <!-- VARIATION LABEL -->
                                <!-- <label
                                    fxFlex="20"
                                    style="margin-top: 45px;"
                                >
                                    Variasi {{ $index + 1 }}
                                </label> -->
                                <!-- / VARIATION LABEL -->
                                <!-- PRODUCT VARIATION -->
                                <!-- <div
                                    fxFlex="80"
                                    fxLayout="row"
                                    fxLayoutAlign="space-around start"
                                    class="grey-100-bg"
                                    style="border-radius: 10px; padding: 20px 10px;"
                                    [style.margin-top]="$index > 0 ? '20px' : '0px'"
                                    [style.margin-bottom]="$index === productVariantControls.length - 1 ? '20px' : '0px'"
                                > -->
                                    <!-- LABEL FOR VARIANT SELECTIONS -->
                                    <!-- <label
                                        fxFlex="15"
                                        style="margin-top: 25px;"
                                    >
                                        Nama Pilihan
                                    </label> -->
                                    <!-- / LABEL FOR VARIANT SELECTIONS -->
                                    <!-- INPUT FOR VARIANT SELECTION -->
                                    <!-- <div
                                        fxFlex="70"
                                        fxLayout="column"
                                        fxLayoutAlign="space-between stretch"
                                    >
                                        <ng-container
                                            *ngFor="let variantSelection of productVariantControls[$index].controls; index as $indexSelection; last as $lastSelection;"
                                        >
                                            <div
                                                fxLayout="row"
                                                fxLayoutAlign="space-between stretch"
                                            >
                                                <mat-form-field
                                                    fxFlex="90"
                                                    appearance="outline"
                                                >
                                                    <input
                                                        matInput
                                                        placeholder="Masukkan Nama Variasi, contoh: warna, dll."
                                                        [formControl]="variantSelection"
                                                    />
                                                </mat-form-field> -->
                                                <!-- DELETE FOR VARIANT SELECTION -->
                                                <!-- <button
                                                    mat-button
                                                    fxFlex
                                                    style="margin-bottom: 20px;"
                                                    (click)="onRemoveVariantSelection($event, $index, $indexSelection)"
                                                >
                                                    <mat-icon>delete</mat-icon>
                                                </button> -->
                                                <!-- / DELETE FOR VARIANT SELECTION -->
                                            <!-- </div>
                                            <button
                                                mat-stroked-button
                                                style="border-style: dashed; width: 100%;"
                                                (click)="onAddVariantSelection($event, $index)"
                                                *ngIf="$lastSelection"
                                            >
                                                <mat-icon>add_circle</mat-icon>
                                                Tambah Pilihan ({{ productVariantControls[$index].controls.length }} / 20)
                                            </button>
                                        </ng-container>
                                    </div> -->
                                    <!-- / INPUT FOR VARIANT SELECTION -->
                                <!-- </div> -->
                                <!-- / PRODUCT VARIATION -->
                            <!-- </div> -->
                            <!-- BUTTON ADD VARIATION -->
                            <!-- <div
                                fxFlex
                                fxLayout="row"
                                fxLayoutAlign="space-between start"
                                style="margin-bottom: 15px;">
                                <button
                                    fxFlex="80"
                                    fxFlexOffset="20"
                                    mat-stroked-button
                                    style="border-style: dashed; width: 100%;"
                                    class="green--fg"
                                    (click)="onAddVariant()"
                                >
                                    <mat-icon>add_circle</mat-icon>
                                    Tambah Variasi
                                </button>
                            </div> -->
                        <!-- </div>
                    </ng-template> -->
                    <!-- / VARIASI PRODUK (HAS VARIANTS) -->
                    <!-- INFORMASI VARIASI PRODUK -->
                    <!-- <div
                        class="custom-field"
                        fxLayout="column"
                        fxLayoutGap="10px"
                        fxLayoutAlign="space-between stretch"
                        *ngIf="productVariantControls?.length > 0"
                    >
                        <ng-container
                            *ngFor="let variant of productVariantFormControls; index as $index; first as $first;"
                        >
                            <form
                                [formGroup]="variantForm"
                                fxLayout="row"
                                fxFlex novalidate
                                style="margin-top: 20px;"
                            > -->
                                <!-- LABEL -->
                                <!-- <label
                                    fxFlexAlign="center"
                                    fxFlex="20"
                                >
                                    <p>Daftar Variasi {{ $index + 1 }}</p>
                                </label> -->
                                <!-- / LABEL -->
                                <!-- <div fxFlex="80"
                                    fxLayout="row"
                                    fxLayoutGap="5px"
                                    fxLayoutAlign="space-between start"
                                > -->
                                    <!-- PRICE -->
                                    <!-- <mat-form-field
                                        fxFlex="20"
                                        appearance="outline"
                                    >
                                        <input
                                            matInput
                                            placeholder="Harga"
                                            [formControl]="variant.get('price')"
                                        />
                                    </mat-form-field> -->
                                    <!-- / PRICE -->
                                    <!-- STOCK -->
                                    <!-- <mat-form-field
                                        fxFlex="20"
                                        appearance="outline"
                                    >
                                        <label
                                            
                                        >
                                        </label>
                                        <input
                                            matInput
                                            placeholder="Stock"
                                            [formControl]="variant.get('stock')"
                                        />
                                    </mat-form-field> -->
                                    <!-- / STOCK -->
                                    <!-- SKU -->
                                    <!-- <mat-form-field
                                        fxFlex="20"
                                        appearance="outline"
                                    >
                                        <input
                                            matInput
                                            placeholder="SKU"
                                            [formControl]="variant.get('sku')"
                                        />
                                    </mat-form-field> -->
                                    <!-- / SKU -->
                                    <!-- APPLY BUTTON -->
                                    <!-- <button
                                        fxFlex
                                        mat-raised-button
                                        style="margin-top: 5px; width: 100%; height: 60%;"
                                        color="accent"
                                    >
                                        Terapkan ke Semua
                                    </button> -->
                                    <!-- / APPLY BUTTON -->
                                <!-- </div> -->
                            <!-- </form> -->
                            <!-- <div
                                fxLayout="row"
                                fxLayoutAlign="space-between stretch"
                            >
                                <label
                                    fxFlex="20"
                                    style="margin-top: 30px;"
                                >
                                    Informasi Variasi {{ $index + 1 }}
                                </label>
                                <table mat-table fxFlex="80" [dataSource]="productVariantSelectionData[$index]" class="mat-elevation-z8">
                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef> Nama </th>
                                        <td mat-cell *matCellDef="let element; let $i = index;"
                                        >
                                            <ng-container
                                                *ngIf="productVariantControls[$index].controls[$i].value.length === 0; else hasVariantInput;"
                                            >
                                                Pilihan {{ $i + 1 }}
                                            </ng-container>
                                            <ng-template
                                                #hasVariantInput
                                            >
                                                {{ productVariantControls[$index].controls[$i].value }}
                                            </ng-template>
                                        </td>
                                    </ng-container>
                                    
                                    <ng-container matColumnDef="price">
                                        <th mat-header-cell *matHeaderCellDef> Harga </th>
                                        <td mat-cell *matCellDef="let element"> {{ variant.get('price').value }} </td>
                                    </ng-container>
                                    
                                    <ng-container matColumnDef="stock">
                                        <th mat-header-cell *matHeaderCellDef> Stock </th>
                                        <td mat-cell *matCellDef="let element"> {{ variant.get('stock').value }} </td>
                                    </ng-container>
                                    
                                    <ng-container matColumnDef="sku">
                                        <th mat-header-cell *matHeaderCellDef> SKU </th>
                                        <td mat-cell *matCellDef="let element"> {{ variant.get('sku').value }} </td>
                                    </ng-container>
                                    
                                    <tr mat-header-row *matHeaderRowDef="variantListColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: variantListColumns;"></tr>
                                </table>
                            </div> -->
                        <!-- </ng-container> -->
                    <!-- </div> -->
                    <!-- / INFORMASI VARIASI PRODUK -->
                    <!-- DAFTAR VARIASI PRODUK -->
                    <!-- <div
                        class="custom-field"
                        fxLayout="column"
                        fxLayoutGap="10px"
                        fxLayoutAlign="space-between stretch"
                        *ngIf="productVariantControls?.length > 0"
                    >
                        <ng-container
                            *ngFor="let variant of productVariantFormControls; index as $index;"
                        >
                            
                        </ng-container>
                    </div> -->
                    <!-- / DAFTAR VARIASI PRODUK -->
                </form>
            </div>
        </div>
        <!-- / CONTENT CARD (INFORMASI PENJUALAN) -->

        <!-- CONTENT CARD (MEDIA PRODUK) -->
        <div class="content-card">
            <div class="p-16">
                <div class="h1">Pengaturan Media</div>
            </div>
        
            <div class="p-16 pt-0 line-height-1.75">
                <form class="w-100-p" [formGroup]="form" fxLayout="column" fxFlex novalidate>
                    <!-- HARGA PRODUK -->
                    <div
                        class="custom-field-right mt-16"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productMedia"
                    >
                        <label
                            class="pr-16 mt-20"
                            fxFlex="20"
                            [class.mat-error]="hasError(form.get('productMedia.photos.0'), { ignoreTouched: true, ignoreDirty: true })"
                        >
                            Foto Produk
                        </label>
                                        
                        <div appearance="outline"
                            fxFlex="80"
                            fxLayout="column"
                            fxLayoutGap="10px"
                            fxLayoutAlign="start start"
                        >
                            <div appearance="outline"
                                fxFlex="80"
                                fxLayout="row"
                                fxLayoutGap="10px"
                                fxLayoutAlign="start start"
                            >
                                <div
                                    fxLayout="column"
                                    fxLayoutAlign="start center"
                                    *ngFor="let photo of productPhotos.controls; let i = index;"
                                >
                                    <input
                                        hidden
                                        #photos
                                        type="file"
                                        (change)="onFileBrowse($event, i)"
                                    />
                                    <ng-container *ngIf="!photo.value; else hasPhoto;">
                                        <div class="img-container">
                                            <button
                                                (click)="photos.click()"
                                                mat-stroked-button
                                                style="border-style: dashed;"
                                                class="red-fg red-border fit-image"
                                            >
                                                <mat-icon>add_circle</mat-icon>
                                            </button>
                                        </div>
                                    </ng-container>
                                    <ng-template #hasPhoto>
                                        <div
                                            class="img-container"
                                            fxLayout="row"
                                            fxLayoutAlign="space-between start"
                                        >
                                            <img class="fit-image" [src]="photo.value"/>
                                            <button
                                                class="red-fg"
                                                mat-icon-button
                                                style="bottom: 22px; right: 22px;"
                                                (click)="onAbortUploadPhoto(photos, i)"
                                            >
                                                <mat-icon>remove_circle</mat-icon>
                                            </button>
                                        </div>
                                    </ng-template>
                                    <ng-container *ngIf="i === 0; else optionalPhoto;">
                                        <div fxLayout="column" fxLayoutAlign="space-between center">
                                            <p class="grey-400-fg" style="margin-bottom: 0px;">*Foto Utama</p>
                                            <button
                                                class="red-fg"
                                                matTooltip="Reset to original image"
                                                mat-icon-button
                                                (click)="onResetImage(i)"
                                                *ngIf="productOldPhotos?.controls[i]?.get('value')?.value
                                                        && (productPhotos?.controls[i]?.value !== productOldPhotos?.controls[i]?.get('value')?.value); else noUndo;"
                                            >
                                                <mat-icon>undo</mat-icon>
                                            </button>
                                            <ng-template #noUndo>
                                                <button
                                                    disabled
                                                    mat-icon-button
                                                >
                                                    <mat-icon></mat-icon>
                                                </button>
                                            </ng-template>
                                        </div>
                                    </ng-container>
                                    <ng-template #optionalPhoto>
                                        <div>
                                            <p class="grey-400-fg" style="margin-bottom: 0px;">Foto {{ i }}</p>
                                            <button
                                                class="red-fg"
                                                matTooltip="Reset to original image"
                                                mat-icon-button
                                                (click)="onResetImage(i)"
                                                *ngIf="productOldPhotos?.controls[i]?.get('value')?.value
                                                        && (productPhotos?.controls[i]?.value !== productOldPhotos?.controls[i]?.get('value')?.value); else noUndo;"
                                            >
                                                <mat-icon>undo</mat-icon>
                                            </button>
                                            <ng-template #noUndo>
                                                <button
                                                    disabled
                                                    mat-icon-button
                                                >
                                                    <mat-icon></mat-icon>
                                                </button>
                                            </ng-template>
                                        </div>
                                    </ng-template>
                                </div>
                            </div>
                            <p
                                fxFlexAlign="start"
                                [class.mat-error]="hasError(form.get('productMedia.photos.0'), { ignoreTouched: true, ignoreDirty: true })"
                            >
                                {{ getFormError(form.get('productMedia.photos.0')) }}
                            </p>
                        </div>
                    </div>
                    <!-- / HARGA PRODUK -->
                </form>
            </div>
        </div>
        <!-- / CONTENT CARD (MEDIA PRODUK) -->

        <!-- CONTENT CARD (PENGIRIMAN PRODUK) -->
        <div class="content-card">
            <div class="p-16">
                <div class="h1">Pengiriman</div>
            </div>
        
            <div class="p-16 pt-0 line-height-1.75">
                <form class="w-100-p" [formGroup]="form" fxLayout="column" fxFlex novalidate>
                    <!-- BERAT PER PCS PRODUK -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productShipment"
                    >
                        <label
                            class="pr-0"
                            fxFlexAlign="center"
                            fxFlex="18"
                            [class.mat-error]="hasError(form.get('productShipment.catalogueWeight'))"
                        >
                            *Berat per Pcs
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80">
                            <input
                                matInput
                                name="weight"
                                formControlName="catalogueWeight"
                                mask="separator"
                                thousandSeparator="."
                                suffix=" gr"
                                placeholder="in gram(s)"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productShipment.catalogueWeight'))"
                            >
                                {{ getFormError(form.get('productShipment.catalogueWeight')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / BERAT PER PCS PRODUK -->
                    <!-- BERAT PER MASTER BOX PRODUK -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productShipment"
                    >
                        <label
                            class="pr-0"
                            fxFlexAlign="center"
                            fxFlex="18"
                            [class.mat-error]="hasError(form.get('productShipment.packagedWeight'))"
                        >
                            Berat per <br/>Master Box
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80">
                            <input
                                matInput
                                name="weight"
                                formControlName="packagedWeight"
                                mask="separator"
                                thousandSeparator="."
                                suffix=" gr"
                                placeholder="in gram(s)"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productShipment.packagedWeight'))"
                            >
                                {{ getFormError(form.get('productShipment.packagedWeight')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / BERAT PER MASTER BOX PRODUK -->
                    <!-- DIMENSI PER PCS PRODUK -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productShipment"
                    >
                        <label
                            class="pr-0"
                            fxFlexAlign="center"
                            fxFlex="18"
                            [class.mat-error]="hasError(form.get('productShipment.catalogueDimension'))"
                        >
                            *Dimensi per <br/>Pcs
                        </label>

                        <mat-form-field appearance="outline" fxFlex="80">
                            <input matInput
                                name="width"
                                formControlName="catalogueDimension"
                                mask="separator"
                                placeholder="in cm"
                                suffix=" cm"
                                thousandSeparator="."
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productShipment.catalogueDimension'))"
                            >
                                {{ getFormError(form.get('productShipment.catalogueDimension')) }}
                            </mat-error>
                            <!-- <p matSuffix>cm</p> -->
                            <!-- <p matSuffix>cm<sup>3</sup></p> -->
                        </mat-form-field>
                    </div>
                    <!-- / DIMENSI PER PCS PRODUK -->
                    <!-- DIMENSI PER MASTER BOX PRODUK -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productShipment"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="18"
                            class="pr-0"
                            [class.mat-error]="hasError(form.get('productShipment.packagedDimension'))"
                        >
                            Dimensi per <br/>Master Box
                        </label>

                        <mat-form-field appearance="outline" fxFlex="80">
                            <input matInput
                                name="width"
                                formControlName="packagedDimension"
                                mask="separator"
                                thousandSeparator="."
                                placeholder="in cm"
                                suffix=" cm"
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productShipment.packagedDimension'))"
                            >
                                {{ getFormError(form.get('productShipment.packagedDimension')) }}
                            </mat-error>
                            <!-- <p matSuffix>cm</p> -->
                            <!-- <p matSuffix>cm<sup>3</sup></p> -->
                        </mat-form-field>
                    </div>
                    <!-- / DIMENSI PER MASTER BOX PRODUK -->
                    <!-- VARIASI PRODUK -->
                    <!-- <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productShipment"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="12"
                            [class.mat-error]="
                                form.get('productShipment.isDangerous').errors &&
                                !form.get('productShipment.isDangerous').untouched &&
                                (form.get('productShipment.isDangerous').dirty || form.get('productShipment.isDangerous').touched)
                            "
                        >
                            Barang berbahaya
                        </label>

                        <mat-checkbox
                            name="isDangerous"
                            appearance="outline" fxFlex="80"
                            formControlName="isDangerous"
                        >Text</mat-checkbox>
                    </div> -->
                    <!-- / VARIASI PRODUK -->
                    <!-- SERVICE PENGIRIMAN -->
                    <!-- <div
                        class="custom-field"
                        fxLayout="row"
                        fxLayoutAlign="space-between start"
                        formGroupName="productShipment"
                    >
                        <label
                            fxFlexAlign="center"
                            fxFlex="12"
                            [class.mat-error]="
                                form.get('productShipment.couriers').errors &&
                                !form.get('productShipment.couriers').untouched &&
                                (form.get('productShipment.couriers').dirty || form.get('productShipment.couriers').touched)
                            "
                        >
                            Service Pengiriman
                        </label>

                        <div 
                            style="border: 1px solid dimgray;"
                            fxLayout="column"
                            fxLayoutAlign="none"
                            fxFlex="80"
                            formArrayName="couriers"
                            >
                                <div
                                    appearance="outline"
                                    fxLayout="row"
                                    fxLayoutGap="5px"
                                    fxLayoutAlign="space-between end"
                                    style="padding: 0 10px;"
                                    *ngFor="let courier of productCourierControls; index as idx;"
                                >
                                    <p>{{ courier?.value?.name }}</p>
                                    <mat-slide-toggle [formControl]="courier?.value?.disabled"></mat-slide-toggle>        
                                </div>
                        </div>
                    </div> -->
                    <!-- / SERVICE PENGIRIMAN -->
                </form>
            </div>
        </div>
        <!-- / CONTENT CARD (PENGIRIMAN PRODUK) -->
        <!-- CONTENT CARD (PENGATURAN JUMLAH PRODUK) -->
        <div class="content-card">
            <div class="p-16">
                <div class="h1">Pengaturan Jumlah</div>
            </div>
        
            <div class="p-16 pt-0 line-height-1.75">
                <form class="w-100-p" [formGroup]="form" fxLayout="column" fxFlex novalidate>
                    <!-- QUANTITY PER MASTER BOX -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between center"
                        formGroupName="productCount"
                    >
                        <label
                            class="pr-0"
                            fxFlexAlign="center"
                            fxFlex="18"
                            fxLayout="column"
                            fxLayoutAlign="center end"
                            [class.mat-error]="hasError(form.get('productCount.qtyPerMasterBox'))"
                        >
                            Quantity <br/>per Master Box
                        </label>
                
                        <mat-form-field appearance="outline" fxFlex="80">
                            <input
                                matInput
                                name="qtyPerMasterBox"
                                formControlName="qtyPerMasterBox"
                                mask="separator"
                                thousandSeparator="."
                            />
                            <mat-error
                                *ngIf="hasError(form.get('productCount.qtyPerMasterBox'))"
                            >
                                {{ getFormError(form.get('productCount.qtyPerMasterBox')) }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <!-- / QUANTITY PER MASTER BOX -->
                    <!-- MINIMUM OF QUANTITY -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productCount"
                    >
                        <label
                            class="pr-0"
                            fxFlexAlign="start"
                            fxFlex="18"
                            fxLayout="column"
                            fxLayoutAlign="center end"
                            [class.mat-error]="hasError(form.get('productCount.minQtyValue'))"
                        >
                            Minimum Order <br/>Quantity
                        </label>

                        <div fxLayout="column" fxLayoutAlign="space-between stretch" fxLayoutGap="5px" fxFlex="80">
                            <!-- RADIO BUTTON SELECT TYPE -->
                            <mat-radio-group formControlName="minQtyOption">
                                <mat-radio-button class="pr-36" *ngFor="let choice of quantityChoices;" [value]="choice.id">{{ choice.label }}</mat-radio-button>
                            </mat-radio-group>
                            <!-- / RADIO BUTTON SELECT TYPE -->
                            <!-- INPUT TEXT BOX -->
                            <mat-form-field appearance="outline">
                                <input matInput
                                    name="minQtyValue"
                                    formControlName="minQtyValue"
                                    mask="separator"
                                    thousandSeparator="."
                                />
                                <mat-error
                                    *ngIf="hasError(form.get('productCount.minQtyValue'))"
                                >
                                    {{ getFormError(form.get('productCount.minQtyValue')) }}
                                </mat-error>
                            </mat-form-field>
                            <!-- / INPUT TEXT BOX -->
                        </div>
                    </div>
                    <!-- / MINIMUM OF QUANTITY -->
                    <!-- ADDITIONAL QUANTITY -->
                    <div
                        class="custom-field-right"
                        fxLayout="row"
                        fxLayoutAlign="space-between stretch"
                        formGroupName="productCount"
                    >
                        <label
                            class="pr-0"
                            fxFlexAlign="start"
                            fxFlex="18"
                            fxLayout="column"
                            fxLayoutAlign="center end"
                            [class.mat-error]="hasError(form.get('productCount.additionalQtyValue'))"
                        >
                            Additional <br/>Quantity
                        </label>

                        <div fxLayout="column" fxLayoutAlign="space-between stretch" fxLayoutGap="5px" fxFlex="80">
                            <!-- RADIO BUTTON SELECT TYPE -->
                            <mat-radio-group formControlName="additionalQtyOption">
                                <mat-radio-button class="pr-36" *ngFor="let choice of quantityChoices;" [value]="choice.id">{{ choice.label }}</mat-radio-button>
                            </mat-radio-group>
                            <!-- / RADIO BUTTON SELECT TYPE -->
                            <!-- INPUT TEXT BOX -->
                            <mat-form-field appearance="outline">
                                <input matInput
                                    name="additionalQtyValue"
                                    formControlName="additionalQtyValue"
                                    mask="separator"
                                    thousandSeparator="."
                                />
                                <mat-error
                                    *ngIf="hasError(form.get('productCount.additionalQtyValue'))"
                                >
                                    {{ getFormError(form.get('productCount.additionalQtyValue')) }}
                                </mat-error>
                            </mat-form-field>
                            <!-- / INPUT TEXT BOX -->
                        </div>
                    </div>
                    <!-- / ADDITIONAL QUANTITY -->
                </form>
            </div>
        </div>
        <!-- / CONTENT CARD (PENGIRIMAN PRODUK) -->
    </div>
    <!-- / CENTER -->
</div>