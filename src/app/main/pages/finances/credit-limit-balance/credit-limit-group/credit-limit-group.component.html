<div fxLayout="row wrap" fxLayoutGap="15px">
    <div class="credit-box-action" fxLayout="column" fxLayoutAlign="center center">
        <button mat-icon-button type="button" (click)="onSetup()">
            <mat-icon>add_circle</mat-icon>
        </button>

        <div>Tambah Credit Limit</div>
    </div>

    <ng-container *ngIf="creditLimitGroups$ | async as creditLimitGroups">
        <div
            appMaterialElevation
            [defaultElevation]="0"
            [raisedElevation]="2"
            class="credit-box-action-fill mb-12"
            fxLayout="column"
            fxLayoutAlign="start stretch"
            matRipple
            style="cursor: pointer"
            *ngFor="let row of creditLimitGroups"
            [class.active]="(selectedRowIndex$ | async) === row?.id"
            (click)="onSetup(row?.id)"
        >
            <div class="background-box" fxFill fxLayout="column" fxLayoutAlign="stretch">
                <div class="top" style="background:#666666" fxFlex="35">
                    <div fxLayout="row" fxLayoutAlign="end stretch" fxFlex>
                        <div style="min-height:70px">
                            <button
                                mat-icon-button
                                type="button"
                                aria-label="Delete"
                                class="fuse-white-fg"
                                (click)="$event.stopPropagation(); onDelete(row)"
                            >
                                <mat-icon>delete</mat-icon>
                            </button>
                        </div>
                        <!-- <span style="color:#757575;font-size:48px">CL01</span> -->
                    </div>
                </div>

                <div
                    class="content p-16"
                    style="position: relative;top:-2.8em"
                    fxLayout="column"
                    fxLayoutGap="10px"
                >
                    <div
                        class="content-top"
                        fxLayout="row"
                        fxLayoutAlign="start center"
                        fxLayoutGap="15px"
                    >
                        <!-- <div class="top-image">
                            <img
                                [src]="'assets/images/avatars/profile.jpg'"
                                style="height: 45px;"
                            />
                        </div> -->

                        <div class="top-content" fxLayout="column">
                            <div style="color:white">
                                {{ safeValue(row?.name) }}
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="7px">
                                <mat-icon svgIcon="icons8-coin"></mat-icon>

                                <span>
                                    {{
                                        +row?.defaultCreditLimit > 0
                                            ? (+row?.defaultCreditLimit | price: 'short')
                                            : +row?.defaultCreditLimit
                                    }}
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="content-bottom">
                        <div>
                            <span>Segment:</span>
                            <span class="ml-4">{{ safeValue(row?.storeSegment?.name) }}</span>
                        </div>

                        <div>
                            <span>Days:</span>
                            <span class="ml-4">{{ +row?.termOfPayment | number }} Days</span>
                        </div>

                        <div>
                            <span>Geograph:</span>
                            <span
                                class="ml-4"
                                [innerHTML]="joinCreditLimitAreas(row?.creditLimitAreas)"
                            ></span>
                        </div>
                        <!-- <table>
                            <tr>
                                <td>Segment:</td>
                                <td>MTI</td>
                            </tr>

                            <tr>
                                <td>Days:</td>
                                <td>2 Days</td>
                            </tr>

                            <tr>
                                <td>Geograph:</td>
                                <td>Jawa Tengah</td>
                            </tr>
                        </table> -->
                    </div>
                </div>

                <!-- <div class="bottom" style="background:white;border:1px solid black" fxFlex>

            </div> -->
            </div>
        </div>
    </ng-container>
</div>
