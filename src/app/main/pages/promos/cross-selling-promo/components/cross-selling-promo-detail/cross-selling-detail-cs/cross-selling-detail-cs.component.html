<div class="pb-16">
    <span class="mat-headline">
        Customer Segmentation Setting
    </span>
</div>

<div class="box-info horizontal" fxLayout="column" fxLayoutGap="16px">
    <div
        class="custom-field info-field"
        fxLayout="row"
        fxLayoutAlign="start center"
        fxLayoutGap="15px"
    >
        <div class="label" fxFlexAlign="center" fxFlex="10">
            Segmentation Base
        </div>

        <div class="info" fxFlexAlign="center" fxFlex="100" style="padding-top: 9px;">
            <ng-container *ngIf="segmentBase; else noSegmentBase">
                <mat-radio-group [value]="(crossSellingPromo$ | async)?.target">
                    <mat-radio-button *ngFor="let row of segmentBase" [value]="row?.id" [disabled]="true">
                        {{ row?.label }}
                    </mat-radio-button>
                </mat-radio-group>
            </ng-container>

            <ng-template #noSegmentBase>
                -
            </ng-template>
        </div>
    </div>

    <ng-container [ngSwitch]="(crossSellingPromo$ | async)?.target">
        <!-- Segmentation Base Direct Store -->
        <ng-container *ngSwitchCase="eSegmentBase.STORE">
            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store<br />
                    ({{ (crossSellingPromo$ | async)?.promoStores?.length }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStores((crossSellingPromo$ | async)?.promoStores) || '-' }}
                </div>
            </div>
        </ng-container>
        <!-- ./ Segmentation Base Direct Store -->

         <!-- Segmentation Base Segmentation -->
         <ng-container *ngSwitchCase="'segmentation'">
            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Warehouse<br />
                    ({{ ((crossSellingPromo$ | async)?.promoWarehouses?.length) || '0' }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getWarehousesSegmentOnly((crossSellingPromo$ | async)?.promoWarehouses) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Type<br />
                    ({{ ((crossSellingPromo$ | async)?.promoTypes?.length) || '0' }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreTypesSegmentOnly((crossSellingPromo$ | async)?.promoTypes) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Group<br />
                    ({{ ((crossSellingPromo$ | async)?.promoGroups?.length) || '0'  }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreGroupsSegmentOnly((crossSellingPromo$ | async)?.promoGroups) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Channel<br />
                    ({{ ((crossSellingPromo$ | async)?.promoChannels?.length) || '0'  }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreChannelsSegmentOnly((crossSellingPromo$ | async)?.promoChannels) || '-0' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Cluster<br />
                    ({{ ((crossSellingPromo$ | async)?.promoClusters?.length) || '0' }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreClustersSegmentOnly((crossSellingPromo$ | async)?.promoClusters) || '-' }}
                </div>
            </div>

            <div
            class="custom-field"
            fxLayout="row"
            fxLayoutAlign="start stretch"
            fxLayoutGap="16px"
        >
            <div class="label" fxFlexAlign="center" fxFlex="10">Specified Target</div>

            <div fxFlexAlign="center" fxFlex="50" fxFill>
                <ng-container *ngIf="!(isLoading$ | async)">
                    <ng-container *ngIf="selectTargetId; else noSpecifiedTargets">
                        <mat-radio-group [value]="selectTargetId">
                            <mat-radio-button
                                *ngFor="let row of specifiedTarget"
                                [value]="row.id"
                                [disabled]="true"
                            >
                                {{ row.label }}

                                <mat-icon
                                    class="active-icon s-14 ml-8 cursor-pointer"
                                    color="accent"
                                    matTooltip="This function allows you to set this promo&#10; to be targeted for new opened stores in the selected segments only."
                                    matTooltipClass="tooltip-br"
                                    *ngIf="row.id == 2"
                                >
                                    help
                                </mat-icon>
                            </mat-radio-button>
                        </mat-radio-group>
                    </ng-container>

                    <ng-template #noSpecifiedTargets>
                        <div fxFlexAlign="center" fxFlex="50">-</div>
                    </ng-template>
                </ng-container>
                <ng-container *ngIf="isLoading$ | async">
                    <ngx-skeleton-loader
                        [theme]="{
                            width: '150px',
                            'margin-bottom': '-5px',
                            'margin-right': '16px'
                        }"
                    ></ngx-skeleton-loader>

                    <ngx-skeleton-loader
                        [theme]="{ width: '100px', 'margin-bottom': '-5px' }"
                    ></ngx-skeleton-loader>
                </ng-container>
            </div>
        </div>

        </ng-container>
        <!-- ./ Segmentation Base Segmentation -->

        <!-- ALL Segmentation Base Segmentation -->
        <ng-container *ngSwitchCase="eSegmentBase.ALLSEGMENTATION">
            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Warehouse<br />
                    ({{custWarehouse.length}} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getWarehouses(custWarehouse) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Type<br />
                    ({{ custType.length }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreTypes(custType) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Group<br />
                    ({{ custGroup.length }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreGroups(custGroup) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Channel<br />
                    ({{ custChannel.length }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreChannels(custChannel) || '-' }}
                </div>
            </div>

            <div
                class="custom-field info-field"
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="15px"
            >
                <div class="label" fxFlexAlign="start" fxFlex="10">
                    Store Cluster<br />
                    ({{ custCluster.length }} Selected)
                </div>

                <div class="info" fxFlex="90">
                    {{ getStoreClusters(custCluster) || '-' }}
                </div>
            </div>

            <div
            class="custom-field"
            fxLayout="row"
            fxLayoutAlign="start stretch"
            fxLayoutGap="16px"
        >
            <div class="label" fxFlexAlign="center" fxFlex="10">Specified Target</div>

            <div fxFlexAlign="center" fxFlex="50" fxFill>
                <ng-container *ngIf="!(isLoading$ | async)">
                    <ng-container *ngIf="selectTargetId; else noSpecifiedTargets">
                        <mat-radio-group [value]="selectTargetId">
                            <mat-radio-button
                                *ngFor="let row of specifiedTarget"
                                [value]="row.id"
                                [disabled]="true"
                            >
                                {{ row.label }}

                                <mat-icon
                                    class="active-icon s-14 ml-8 cursor-pointer"
                                    color="accent"
                                    matTooltip="This function allows you to set this promo&#10; to be targeted for new opened stores in the selected segments only."
                                    matTooltipClass="tooltip-br"
                                    *ngIf="row.id == 2"
                                >
                                    help
                                </mat-icon>
                            </mat-radio-button>
                        </mat-radio-group>
                    </ng-container>

                    <ng-template #noSpecifiedTargets>
                        <div fxFlexAlign="center" fxFlex="50">-</div>
                    </ng-template>
                </ng-container>
                <ng-container *ngIf="isLoading$ | async">
                    <ngx-skeleton-loader
                        [theme]="{
                            width: '150px',
                            'margin-bottom': '-5px',
                            'margin-right': '16px'
                        }"
                    ></ngx-skeleton-loader>

                    <ngx-skeleton-loader
                        [theme]="{ width: '100px', 'margin-bottom': '-5px' }"
                    ></ngx-skeleton-loader>
                </ng-container>
            </div>
        </div>
        </ng-container>
        <!-- ./ Segmentation Base Segmentation -->

        <ng-container *ngSwitchDefault>-</ng-container>
    </ng-container>
</div>
